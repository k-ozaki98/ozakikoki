<div id="about" class="about sec-inner">
  <div class="l-inner about__inner">
    <div class="about__heading">
      <span class="layer-open about-trigger">
        <svg id="_レイヤー_1" data-name="レイヤー 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 170.74 57.76">
          <path class="about-path" d="M28.94,0l8.46,56.92h-15.13l-.79-10.23h-5.29l-.89,10.23H0L7.55,0H28.94Zm-7.84,36.6c-.75-6.45-1.5-14.42-2.25-23.91-1.51,10.9-2.46,18.87-2.84,23.91h5.09Z"/>
          <path class="about-path" d="M53.7,0V13.47c1.17-1.36,2.48-2.38,3.92-3.05,1.44-.67,3.01-1,4.69-1,1.95,0,3.63,.3,5.06,.91,1.43,.61,2.52,1.46,3.27,2.57,.75,1.1,1.2,2.18,1.35,3.23,.15,1.05,.23,3.3,.23,6.75v21.02c0,3.42-.23,5.97-.69,7.65-.46,1.68-1.53,3.13-3.22,4.36s-3.69,1.85-6.01,1.85c-1.66,0-3.22-.36-4.66-1.09-1.44-.73-2.76-1.82-3.96-3.28l-.91,3.52h-13.29V0h14.2Zm4.32,23.52c0-2.41-.15-3.99-.46-4.73-.3-.74-.9-1.11-1.79-1.11s-1.43,.32-1.69,.97c-.26,.65-.39,2.27-.39,4.87v20.11c0,2.51,.15,4.11,.44,4.82,.29,.7,.87,1.05,1.74,1.05s1.47-.36,1.74-1.09c.27-.73,.4-2.47,.4-5.24V23.52Z"/>
          <path class="about-path" d="M109.04,26.65v11.43c0,4.2-.21,7.27-.63,9.23-.42,1.96-1.32,3.79-2.71,5.48-1.38,1.7-3.16,2.95-5.33,3.76-2.17,.81-4.66,1.21-7.47,1.21-3.14,0-5.8-.35-7.98-1.04s-3.87-1.73-5.08-3.13c-1.21-1.39-2.07-3.08-2.58-5.06-.52-1.98-.77-4.95-.77-8.91v-11.95c0-4.34,.47-7.72,1.41-10.16,.94-2.44,2.62-4.39,5.06-5.87,2.44-1.48,5.55-2.21,9.35-2.21,3.19,0,5.92,.47,8.21,1.42s4.05,2.19,5.29,3.71c1.24,1.52,2.09,3.09,2.55,4.71s.69,4.08,.69,7.38Zm-14.2-3.52c0-2.39-.13-3.9-.39-4.52-.26-.62-.81-.93-1.65-.93s-1.41,.31-1.69,.93c-.28,.62-.42,2.13-.42,4.52v21.06c0,2.2,.14,3.64,.42,4.31s.83,1,1.65,1,1.4-.3,1.67-.91c.27-.61,.4-1.92,.4-3.94V23.13Z"/>
          <path class="about-path" d="M146.23,10.27V56.92h-14.45l.25-3.88c-.98,1.57-2.2,2.75-3.64,3.54-1.44,.79-3.1,1.18-4.97,1.18-2.13,0-3.9-.38-5.31-1.12s-2.44-1.75-3.11-2.99-1.08-2.54-1.25-3.88c-.16-1.35-.25-4.03-.25-8.03V10.27h14.2v31.75c0,3.63,.11,5.79,.33,6.47,.22,.68,.83,1.02,1.81,1.02,1.05,0,1.68-.35,1.88-1.05,.2-.7,.3-2.96,.3-6.79V10.27h14.2Z"/>
          <path class="about-path" d="M166.31,4.04v7.35h3.83v7.38h-3.83v24.96c0,3.07,.16,4.78,.47,5.13s1.63,.53,3.96,.53v7.52h-5.73c-3.23,0-5.54-.13-6.93-.4-1.38-.27-2.6-.89-3.66-1.86s-1.71-2.09-1.97-3.34c-.26-1.25-.39-4.2-.39-8.84V18.77h-3.06v-7.38h3.06V4.04h14.24Z"/>
        </svg>
      </span>
    </div>

    <div class="fade-in about__text-wrap">
      <p class="about__text">
        はじめまして。<br>
        大阪にてWeb制作をしております。
      </p>
      <p class="about__text">
        京都府京丹後市で生まれ。<br>
        2022年に未経験からWeb業界に飛び込み、<br>
        現在は大阪市でフロントエンドエンジニアとして活動しています。
      </p>

    </div>
    <section class="about__wrap">
      <div class="about__img clip-path">
        <img src="../assets/images/top/profile.jpg" alt="プロフィール写真">
      </div>
      <div class="about__list-wrap">
        <h3 class="about__name"><span class="clip-path-layer">Koki Ozaki</span></h3>
        <p class="about__name-ja"><span class="clip-path-layer">尾崎 幸喜</span></p>
        <dl class="about__list">
          <dt>名前：</dt>
          <dd>尾崎 幸喜</dd>
        </dl>
        <dl class="about__list">
          <dt>所在地：</dt>
          <dd>大阪市内</dd>
        </dl>
        <dl class="about__list">
          <dt>お問い合わせ：</dt>
          <dd>koki.ozaki98@gmail.com</dd>
        </dl>
        <dl class="about__list">
          <dt>事業内容：</dt>
          <dd>
            web制作におけるディレクション、HTML・CSSコーディング、レスポンシブデザイン、CMS導入等
          </dd>
        </dl>
        
      </div>
    </section>

    <section class="about__skills">
      <h3 class="about__skills-title">Skills</h3>
      
      <div class="skills-container">
        <div class="skill-category">
          <h4>言語</h4>
          <div class="skill-items">
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">HTML</span>
                <span class="skill-percentage">95%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="95"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">SCSS</span>
                <span class="skill-percentage">95%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="95"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">JavaScript</span>
                <span class="skill-percentage">90%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="90"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">PHP</span>
                <span class="skill-percentage">85%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="85"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">Python</span>
                <span class="skill-percentage">60%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="60"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="skill-category">
          <h4>フレームワーク & ライブラリ</h4>
          <div class="skill-items">
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">React</span>
                <span class="skill-percentage">80%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="80"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">Vue.js</span>
                <span class="skill-percentage">75%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="75"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">Laravel</span>
                <span class="skill-percentage">80%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="80"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">Node.js</span>
                <span class="skill-percentage">75%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="75"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="skill-category">
          <h4>その他</h4>
          <div class="skill-items">
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">Git</span>
                <span class="skill-percentage">85%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="85"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">MySQL</span>
                <span class="skill-percentage">80%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="80"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-info">
                <span class="skill-name">CMS</span>
                <span class="skill-percentage">85%</span>
              </div>
              <div class="skill-bar">
                <div class="skill-progress" data-width="85"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>


<style lang="scss">
  @import '../styles/vars.scss';

  .about {
    width: 100%;
    position: relative;
    padding-bottom: 0;

    &__inner {
      position: relative;
      
    }

    &__heading {
      width: 100%;
      cursor: pointer;
      margin-bottom: vw-pc(100);

      .layer-open {
        display: inline-block;
        width: 100%;
      }

      svg {
        height: vw-pc(200);
        width: auto;

        @include max-screen($bp-sp) {
          height: 8rem;
        }

        path {
          opacity: 0;
          transition: fill 0.5s ease;
        }

      }
    }

    &__wrap {
      display: flex;
      justify-content: space-between;
      align-items: start;
      gap: 5rem;
    }

    &__img {
      width: 30%;
      aspect-ratio: 1;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }

    &__list-wrap {
      width: 65%;
    }

    &__name {
      font-size: 2.2rem;
      // margin-bottom: 1rem;
      font-weight: normal;
      font-family: "Cormorant Garamond", serif;
    }

    &__name-ja {
      font-size: 2.4rem;
      margin-bottom: 3rem;
    }

    &__list {
      display: flex;
      justify-content: start;
      margin-bottom: 0.5rem;

      dt {
        font-size: 1.6rem;
        font-weight: bold;
        width: 20%;
      }
      dd {
        font-size: 1.6rem;
        width: 80%;
      }
    }

    &__text-wrap {
      margin-bottom: 5rem;
    }

    &__text {
      font-size: 1.6rem;
      line-height: 2;
      margin-bottom: 2rem;
    }

    &__skills {
      margin-top: vw-pc(100);

      &-title {
        font-size: vw-pc(40);
        margin-bottom: vw-pc(50);
      }
    }
  }

  .skills-container {
    display: grid;
    gap: vw-pc(50);
  }

  .skill-category {
    h4 {
      font-size: vw-pc(24);
      margin-bottom: vw-pc(30);
    }
  }

  .skill-items {
    display: grid;
    gap: vw-pc(20);
  }

  .skill-item {
    .skill-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: vw-pc(10);
      font-size: vw-pc(16);
    }

    .skill-bar {
      height: vw-pc(8);
      background: rgba(#000, 0.1);
      border-radius: vw-pc(4);
      overflow: hidden;
    }

    .skill-progress {
      width: 0;
      height: 100%;
      background: linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%);
      transform-origin: left;
      border-radius: vw-pc(4);
    }
  }

  .about-open {
    display: flex;
    position: relative;
    align-items: center;
    justify-content: center;
    width: vw-pc(100);
    height: vw-pc(100);
    background: #c13332;
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;

    @include max-screen($bp-sp) {
      width: 7rem;
      height: 7rem;
    }

    &::after {
      content: "";
      width: 100%;
      height: 100%;
      background: #fff;
      position: absolute;
      top: 0;
      right: 0;
      z-index: 2;
      transition: 0.5s;
    }

    svg {
      width: vw-pc(30);
      position: relative;
      z-index: 3;

      @include max-screen($bp-sp) {
        width: 2rem;
      }
    }

    &.hover {
      &::after {
        width: 0;
      }
    }
    
  }

  .about-path {
    fill: #000; 
    transition: fill 0.5s ease;
  }
  
</style>

<script>
  import {
		ScrollTrigger
	} from "gsap/ScrollTrigger";
  import gsap from "../scripts/gsap";

  function initSkillsAnimation() {
    const skills = document.querySelectorAll('.skill-progress');
  
    ScrollTrigger.create({
      trigger: '.about__skills',
      start: 'top 65%',
      onEnter: () => {
        skills.forEach(skill => {
          const width = skill.dataset.width;
          gsap.to(skill, {
            width: `${width}%`,
            duration: 1.5,
            ease: 'power4.out',
            stagger: {
              amount: 0.3
            }
          }) 
        })
      }
    })

  }


  window.addEventListener('load', () => {
    gsap.registerPlugin(ScrollTrigger);

    function animateSVG(className) {
      const paths = document.querySelectorAll(`.${className}`);

      paths.forEach((path, index) => {
        gsap.fromTo(path,
          { opacity: 0, y: 50, x: 20 },
          {
            opacity: 1,
            y: 0,
            x: 0,
            duration: 0.5,
            delay: index * 0.1,
            scrub: true,
            ease: 'power2.out'
          }      
        );
      });
    }

    function createTrigger(triggerClass, pathClass) {
      ScrollTrigger.create({
        trigger: `.${triggerClass}`,
        start: "top 65%",
        end: "bottom top",
        once: true,
        onEnter: () => animateSVG(pathClass),
      });
    }

    createTrigger('about', 'about-path');
    initSkillsAnimation();
  });
</script>